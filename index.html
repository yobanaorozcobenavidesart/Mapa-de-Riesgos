<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mapa Conceptual Interactivo</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: "Times New Roman", Times, serif;
      background-color: #121212;
      color: white;
      margin: 0;
      padding: 13px;
      line-height: 1.1;
    }
    
    h1 {
      text-align: center;
      color: #FFD700;
      margin: 10px 0;
      font-size: clamp(1.1rem, 4vw, 2rem);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .language-selector {
      text-align: center;
      margin: 10px 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .language-btn {
      background-color: #333;
      color: #FFD700;
      border: 1px solid #FFD700;
      padding: 6px 6px;
      border-radius: 20px;
      cursor: pointer;
      font-family: "Times New Roman", Times, serif;
      font-size: clamp(0.8rem, 3vw, 1rem);
      min-width: 80px;
      transition: all 0.3s ease;
    }
    
    .language-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 8px #FFD700;
    }
    
    .language-btn.active {
      background-color: #FFD700;
      color: #121212;
      font-weight: bold;
    }
    
    .age-selector {
      text-align: center;
      margin: 15px 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .age-btn {
      background-color: #333;
      color: #FFD700;
      border: 1px solid #FFD700;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-family: "Times New Roman", Times, serif;
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      transition: all 0.3s ease;
    }
    
    .age-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 8px #FFD700;
    }
    
    .age-btn.active {
      background-color: #FFD700;
      color: #121212;
      font-weight: bold;
    }
    
    .age-section {
      display: none;
    }
    
    .age-section.active {
      display: block;
    }
    
    .workspace {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 15px;
    }
    
    @media (min-width: 768px) {
      .workspace {
        flex-direction: row;
        align-items: flex-start;
      }
    }
    
    .concept-pool {
      background-color: #2E2E2E;
      padding: 15px;
      border-radius: 15px;
      width: 100%;
      max-height: 430px;
      overflow-y: auto;
      border: 2px dashed #FFD700;
    }
    
    @media (min-width: 768px) {
      .concept-pool {
        width: 200px;
        max-height: 1200px;
      }
    }
    
    .concept-map-container {
      flex-grow: 1;
      width: 100%;
      height: 200vh; /* √Årea m√°s larga hacia abajo */
      overflow: auto;
      border: 2px solid #FFD700;
      border-radius: 15px;
      background-color: #2E2E2E;
      position: relative;
    }
    
    .concept-map {
      position: relative;
      min-height: 1500px; /* Altura aumentada */
      min-width: 100%;
      padding: 20px;
      background-image: radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.05) 0%, rgba(255, 215, 0, 0.01) 90%);
    }
    
    .concept {
      background-color: #3A3A3A;
      color: white;
      padding: 10px 15px;
      margin: 10px 0;
      border-radius: 10px;
      cursor: move;
      border-left: 5px solid #FFD700;
      text-align: center;
      font-size: clamp(0.8rem, 2vw, 1rem);
      transition: all 0.2s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      user-select: none;
    }
    
    .concept:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 10px rgba(255, 215, 0, 0.3);
    }
    
    .concept.dragging {
      opacity: 0.7;
      transform: scale(0.95);
    }
    
    .node {
      position: absolute;
      background-color: #3A3A3A;
      color: white;
      padding: 10px 15px;
      border-radius: 10px;
      min-width: 80px;
      max-width: 120px;
      text-align: center;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      font-size: clamp(0.8rem, 2vw, 1rem);
      word-break: break-word;
      z-index: 10;
      cursor: move;
      transition: all 0.2s ease;
      border: 1px solid transparent;
      user-select: none;
    }
    
    .node:hover {
      border-color: #FFD700;
      transform: scale(1.03);
    }
    
    .node.main {
      background-color: #FFD700;
      color: #121212;
      font-weight: bold;
      font-size: clamp(0.9rem, 3vw, 1.1rem); /* Tama√±o m√°s peque√±o */
      max-width: 180px; /* Ancho reducido */
      z-index: 20;
      padding: 10px 15px; /* Padding reducido */
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    
    .connection-line {
      position: absolute;
      background-color: #FFD700;
      z-index: 5;
      transform-origin: 0 0;
      height: 2px;
      pointer-events: none;
    }
    
    .controls {
      text-align: center;
      margin: 20px 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .control-btn {
      background-color: #3A3A3A;
      color: #FFD700;
      border: 2px solid #FFD700;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-family: "Times New Roman", Times, serif;
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      min-width: 120px;
      transition: all 0.3s ease;
    }
    
    .control-btn:hover {
      background-color: #FFD700;
      color: #121212;
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    
    .control-btn.print {
      background-color: #1E88E5;
      border-color: #1E88E5;
      color: white;
    }
    
    .control-btn.print:hover {
      background-color: #0D47A1;
      border-color: #0D47A1;
    }
    
    .instructions {
      text-align: center;
      margin: 10px 0;
      font-style: italic;
      color: #FFD700;
      font-size: clamp(0.9rem, 3vw, 1.1rem);
    }
    
    .zoom-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 100;
    }
    
    .zoom-btn {
      background-color: #3A3A3A;
      color: #FFD700;
      border: 2px solid #FFD700;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .zoom-btn:hover {
      background-color: #FFD700;
      color: #121212;
    }
    
    /* Estilos para impresi√≥n */
    @media print {
      body {
        background-color: white !important;
        color: black !important;
        padding: 0 !important;
      }
      
      .language-selector, .age-selector, .controls, .instructions, .concept-pool, .zoom-controls {
        display: none !important;
      }
      
      .concept-map-container {
        overflow: visible !important;
        height: auto !important;
        max-height: none !important;
        border: none !important;
        background-color: white !important;
      }
      
      .concept-map {
        transform: none !important;
        min-height: auto !important;
        width: 100% !important;
        padding: 20px !important;
        background-image: none !important;
      }
      
      .node {
        position: static !important;
        display: inline-block !important;
        margin: 10px !important;
        page-break-inside: avoid;
        background-color: #f5f5f5 !important;
        color: black !important;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;
        transform: none !important;
      }
      
      .node.main {
        background-color: #FFD700 !important;
        color: #121212 !important;
        display: block !important;
        margin: 0 auto 20px auto !important;
      }
      
      .connection-line {
        display: none !important;
      }
      
      h1 {
        color: black !important;
      }
      
      /* Organizaci√≥n para impresi√≥n */
      .category-group {
        display: block !important;
        margin-bottom: 30px !important;
        page-break-inside: avoid;
      }
      
      .category-title {
        font-weight: bold;
        color: #FFD700;
        margin-bottom: 10px;
        font-size: 1.1rem;
      }
      
      .concept-map {
        text-align: center;
      }
    }

    /* Footer styles */
    footer {
      background-color: #000;
      color: #ccc;
      padding: 30px 20px;
      font-size: 0.8rem;
      text-align: center;
      line-height: 1.5;
      border-top: 2px solid #ff6f00;
      margin-top: 40px;
      font-family: 'Playfair Display', serif;
    }

    footer strong {
      color: #fff;
      font-weight: 700;
    }

    footer em {
      color: #ffa726;
      font-style: normal;
      font-weight: 400;
    }

    footer a {
      color: #F6BE00;
      text-decoration: none;
      font-weight: 500;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .enlaces-footer {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .enlaces-footer a {
      white-space: nowrap;
    }

    .contador-visitas {
      margin-top: 25px;
    }

    .contador-visitas img {
      max-width: 100px;
      opacity: 0.9;
    }

    .doi-badge img,
    .cc-logo img {
      vertical-align: middle;
      height: 20px;
      margin: 0 5px;
    }
  </style>
</head>
<body>
   
  <div class="language-selector">
    <button class="language-btn active" onclick="changeLanguage('es')">Es</button>
    <button class="language-btn" onclick="changeLanguage('en')">En</button>
    <button class="language-btn" onclick="changeLanguage('fr')">Fr</button>
  </div>
   <h1 id="main-title">Mapa Conceptual Interactivo</h1>
  
  <div style="text-align: center; margin-top: -1px; margin-bottom: 30px;">
      <img src="https://i.postimg.cc/wxbXr1cN/786cba55-7b54-4556-a8eb-63ddfc85dfdb.jpg"
           alt="Imagen decorativa"
           style="max-width: 150px; border: 3px solid gold; border-radius: 10px; box-shadow: 0 0 15px gold;">
    </div>
  
  <div class="age-selector">
    <button class="age-btn active" onclick="showAgeSection('children')" id="btn-children">üëßüßí Ni√±os</button>
    <button class="age-btn" onclick="showAgeSection('teens')" id="btn-teens">üë®‚Äçüéìüë©‚ÄçüéìJ√≥venes</button>
  </div>
  
  <!-- Secci√≥n para Ni√±os -->
  <div id="children-section" class="age-section active">
    <p class="instructions" id="children-instructions">‚ú® Arrastra los conceptos al mapa y organ√≠zalos como prefieras. Puedes mover todo libremente. ‚ú®</p>
    
    <div class="workspace">
      <div class="concept-pool" id="children-pool">
        <h3 id="children-concepts-title">üîç Conceptos de Riesgo</h3>
        <!-- Conceptos se insertar√°n aleatoriamente por JavaScript -->
      </div>
      
      <div class="concept-map-container">
        <div class="concept-map" id="children-map">
          <!-- Mapa base - Ahora es movible -->
          <div class="node main" style="top: 30px; left: 50%; transform: translateX(-50%);" draggable="true">Riesgos para Ni√±os üëßüßí</div>
          
          <!-- Categor√≠as movibles -->
          <div class="node" id="children-physical-node" style="top: 120px; left: 20%;" data-type="physical" draggable="true">F√≠sicos üí™</div>
          <div class="node" id="children-emotional-node" style="top: 120px; left: 35%;" data-type="emotional" draggable="true">Emocionales üòä</div>
          <div class="node" id="children-digital-node" style="top: 120px; left: 50%;" data-type="digital" draggable="true">Digitales üì±</div>
          <div class="node" id="children-social-node" style="top: 120px; left: 65%;" data-type="social" draggable="true">Sociales üë´</div>
          <div class="node" id="children-academic-node" style="top: 120px; left: 80%;" data-type="academic" draggable="true">Acad√©micos üìö</div>
        </div>
      </div>
    </div>
    
    <div class="controls">
      <button class="control-btn" onclick="resetCurrentMap()" id="children-reset-btn">üîÑ Reiniciar Mapa</button>
      <button class="control-btn" onclick="checkCurrentMap()" id="children-check-btn">‚úÖ Verificar Mapa</button>
      <button class="control-btn print" onclick="printMap()" id="print-btn">üñ®Ô∏è Imprimir Mapa</button>
    </div>
  </div>
  
  <!-- Secci√≥n para J√≥venes -->
  <div id="teens-section" class="age-section">
    <p class="instructions" id="teens-instructions">Arrastra los conceptos al mapa y organ√≠zalos como prefieras. Puedes mover todo libremente.</p>
    
    <div class="workspace">
      <div class="concept-pool" id="teens-pool">
        <h3 id="teens-concepts-title">Conceptos de Riesgo</h3>
        <!-- Conceptos se insertar√°n aleatoriamente por JavaScript -->
      </div>
      
      <div class="concept-map-container">
        <div class="concept-map" id="teens-map">
          <!-- Mapa base - Ahora es movible -->
          <div class="node main" style="top: 30px; left: 50%; transform: translateX(-50%);" draggable="true">Riesgos para J√≥venes</div>
          
          <!-- Categor√≠as movibles -->
          <div class="node" id="teens-physical-node" style="top: 120px; left: 20%;" data-type="physical" draggable="true">F√≠sicos</div>
          <div class="node" id="teens-emotional-node" style="top: 120px; left: 35%;" data-type="emotional" draggable="true">Emocionales</div>
          <div class="node" id="teens-health-node" style="top: 120px; left: 50%;" data-type="health" draggable="true">Salud</div>
          <div class="node" id="teens-digital-node" style="top: 120px; left: 65%;" data-type="digital" draggable="true">Digitales</div>
          <div class="node" id="teens-social-node" style="top: 120px; left: 80%;" data-type="social" draggable="true">Sociales</div>
          <div class="node" id="teens-academic-node" style="top: 220px; left: 50%; transform: translateX(-50%);" data-type="academic" draggable="true">Acad√©micos</div>
        </div>
      </div>
    </div>
    
    <div class="controls">
      <button class="control-btn" onclick="resetCurrentMap()" id="teens-reset-btn">Reiniciar Mapa</button>
      <button class="control-btn" onclick="checkCurrentMap()" id="teens-check-btn">Verificar Mapa</button>
      <button class="control-btn print" onclick="printMap()" id="print-btn">Imprimir Mapa</button>
    </div>
  </div>

  <div class="zoom-controls">
    <button class="zoom-btn" onclick="zoomIn()">+</button>
    <button class="zoom-btn" onclick="zoomOut()">-</button>
    <button class="zoom-btn" onclick="resetZoom()">‚Üª</button>
  </div>

  <footer>
    ¬© 2024-2025 ‚Äî Herramientas del Proyecto de Investigaci√≥n: <strong>*Emociones en el Aula*</strong><br>
    Propuesta educativa y cultural creada por <strong>Yobana Orozco Benavides</strong>, Escritora | Docente | Gestora de proyectos art√≠sticos y pedag√≥gicos<br><br>
    
    Licencia: 
    <em>Creative Commons Atribuci√≥n-NoComercial 4.0 Internacional (CC BY-NC 4.0)</em>
    <span class="cc-logo">
      <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">
        <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC Logo">
      </a>
    </span>
    <br>
    Uso libre con fines educativos ‚Äî <strong>prohibido uso comercial</strong><br><br>

    M√°s informaci√≥n de la autora: 
    <a href="https://yobanaorozcoartista.bio.link/" target="_blank" rel="noopener">yobanaorozcoartista.bio.link</a>

    <div class="enlaces-footer">
      <a href="https://orcid.org/0009-0002-9253-6429" target="_blank">ORCID</a>
      <a href="https://www.webofscience.com/wos/?mode=Nextgen&path=%2Fwos%2Fauthor%2Frecord%2FLLM-9647-2024&IsProductCode=Yes&Init=Yes&DestApp=UA&Func=Frame&action=transfer&SrcApp=CR&SID=USW2EC0AFFb0eJYIUmqxKCgZWIVbn" target="_blank">Web of Science</a>
      <a href="https://account.ncbi.nlm.nih.gov/?back_url=https%3A%2F%2Fwww.ncbi.nlm.nih.gov%2Fmyncbi%2F" target="_blank">NCBI</a>
      <a href="https://es.slideshare.net/YOBANAOROZCO" target="_blank">SlideShare</a>
      <a href="https://hq.ssrn.com/login/authentication.cfm?rectype=edit&perinf=y&partid=7786766" target="_blank">SSRN</a>
      <a href="https://www.researchgate.net/" target="_blank">ResearchGate</a>
      <a href="https://siise.bibliotecanacional.gov.co/siise/Login?ReturnUrl=%2fsiise%2fSeleccionAdquisiciones%2fSolicitudISSN%2fIndex" target="_blank">SIISE</a>
      <a href="https://scientificrc.org/index.php/src/login?source=%2Findex.php%2Fsrc%2Fsubmission%2Fwizard" target="_blank">Scientific RC</a>
      <a href="https://www.openaire.eu/annual-reports" target="_blank">OpenAIRE</a>
      <a href="https://zenodo.org/" target="_blank">Zenodo</a>
      <a href="https://sso.anii.org.uy/oxauth/login.htm" target="_blank">ANII</a>
      <a href="https://rizoma.conahcyt.mx/acerca-de-mi/mi-perfil" target="_blank">Rizoma CONAHCYT</a>
      <a href="https://papersubmission.scirp.org/paper/showAddPaper" target="_blank">SCIRP Submission</a>
      <a href="https://utolima.academia.edu/YOBANAOROZCOBENAVIDES" target="_blank">Academia.edu</a>
      <a href="https://www.studocu.com/co/user/yobana-orozco-benavides/15382735?origin=user-menu" target="_blank">Studocu</a>
      <a href="https://www.calameo.com/accounts/7997056" target="_blank">Calameo</a>
      <a href="https://www.amazon.com.mx/stores/YOBANA-OROZCO-BENAVIDES/author/B0CZG5RS1T?ref=ap_rdr&isDramIntegrated=true&shoppingPortalEnabled=true" target="_blank">Amazon</a>
    </div>
  </footer>

  <script>
    // Traducciones completas
    const translations = {
      es: {
        title: "Mapa Conceptual Interactivo",
        children: {
          instructions: "‚ú® Arrastra los conceptos al mapa y organ√≠zalos como prefieras. Puedes mover todo libremente. ‚ú®",
          conceptsTitle: "üîç Conceptos de Riesgo",
          resetBtn: "üîÑ Reiniciar Mapa",
          checkBtn: "‚úÖ Verificar Mapa",
          printBtn: "üñ®Ô∏è Imprimir Mapa",
          mainNode: "Riesgos para Ni√±os üëßüßí",
          categories: {
            physical: "F√≠sicos üí™",
            emotional: "Emocionales üòä",
            digital: "Digitales üì±",
            social: "Sociales üë´",
            academic: "Acad√©micos üìö"
          },
          concepts: {
            physical: ["Ca√≠das y golpes ü§ï", "Quemaduras üî•", "Accidentes üöë", "Cortadas ‚úÇÔ∏è", "Mala alimentaci√≥n üçî"],
            emotional: ["Tristeza üò¢", "Soledad üè†", "Miedo üò®", "Baja autoestima üòû"],
            digital: ["Contenido inapropiado üëÅÔ∏è", "Contacto con desconocidos üë§", "Mucho tiempo en pantallas ‚è≥"],
            social: ["Bullying üò†", "Presi√≥n de compa√±eros üë•", "Exclusi√≥n üö´"],
            academic: ["No hacer tareas üìù", "Distraerse en clase ü§™", "Faltar a la escuela üèÉ"]
          },
          feedback: {
            success: "¬°Excelente! üéâ Has organizado correctamente los riesgos.",
            incomplete: "Faltan algunos conceptos por colocar en el mapa. üîç",
            wrong: "Algunos conceptos est√°n en la categor√≠a incorrecta. ‚ùå"
          }
        },
        teens: {
          instructions: "Arrastra los conceptos al mapa y organ√≠zalos como prefieras. Puedes mover todo libremente.",
          conceptsTitle: "Conceptos de Riesgo",
          resetBtn: "Reiniciar Mapa",
          checkBtn: "Verificar Mapa",
          printBtn: "Imprimir Mapa",
          mainNode: "Riesgos para J√≥venes",
          categories: {
            physical: "F√≠sicos",
            emotional: "Emocionales",
            health: "Salud",
            digital: "Digitales",
            social: "Sociales",
            academic: "Acad√©micos"
          },
          concepts: {
            physical: ["Consumo de alcohol", "Consumo de drogas", "Accidentes de tr√°fico", "Relaciones sin protecci√≥n", "Mala alimentaci√≥n"],
            emotional: ["Depresi√≥n", "Ansiedad", "Trastornos alimenticios", "Ideas suicidas"],
            health: ["Embarazo precoz", "Infecciones de transmisi√≥n sexual", "Obesidad"],
            digital: ["Sexting", "Ciberacoso", "Adicci√≥n a redes", "Robo de identidad"],
            social: ["Pandillas", "Presi√≥n de grupo", "Violence", "Discriminaci√≥n"],
            academic: ["Abandono escolar", "Bajo rendimiento", "Falta de motivaci√≥n"]
          },
          feedback: {
            success: "¬°Excelente! Has organizado correctamente los riesgos.",
            incomplete: "Faltan algunos conceptos por colocar en el mapa.",
            wrong: "Algunos conceptos est√°n en la categor√≠a incorrecta."
          }
        },
        ageButtons: {
          children: "Ni√±os üëßüßí",
          teens: "J√≥venes üë®‚Äçüéìüë©‚Äçüéì"
        }
      },
      en: {
        title: "Interactive Concept Map üß©",
        children: {
          instructions: "‚ú® Drag concepts to the map and organize them as you like. You can move everything freely. ‚ú®",
          conceptsTitle: "üîç Risk Concepts",
          resetBtn: "üîÑ Reset Map",
          checkBtn: "‚úÖ Check Map",
          printBtn: "üñ®Ô∏è Print Map",
          mainNode: "Risks for Children üëßüßí",
          categories: {
            physical: "Physical üí™",
            emotional: "Emotional üòä",
            digital: "Digital üì±",
            social: "Social üë´",
            academic: "Academic üìö"
          },
          concepts: {
            physical: ["Falls and hits ü§ï", "Burns üî•", "Accidents üöë", "Cuts ‚úÇÔ∏è", "Poor nutrition üçî"],
            emotional: ["Sadness üò¢", "Loneliness üè†", "Fear üò®", "Low self-esteem üòû"],
            digital: ["Inappropriate content üëÅÔ∏è", "Contact with strangers üë§", "Too much screen time ‚è≥"],
            social: ["Bullying üò†", "Peer pressure üë•", "Exclusion üö´"],
            academic: ["Not doing homework üìù", "Getting distracted in class ü§™", "Missing school üèÉ"]
          },
          feedback: {
            success: "Excellent! üéâ You've correctly organized the risks.",
            incomplete: "Some concepts are missing from the map. üîç",
            wrong: "Some concepts are in the wrong category. ‚ùå"
          }
        },
        teens: {
          instructions: "Drag concepts to the map and organize them as you like. You can move everything freely.",
          conceptsTitle: "Risk Concepts",
          resetBtn: "Reset Map",
          checkBtn: "Check Map",
          printBtn: "Print Map",
          mainNode: "Risks for Teens",
          categories: {
            physical: "Physical",
            emotional: "Emotional",
            health: "Health",
            digital: "Digital",
            social: "Social",
            academic: "Academic"
          },
          concepts: {
            physical: ["Alcohol consumption", "Drug use", "Traffic accidents", "Unprotected relationships", "Poor nutrition"],
            emotional: ["Depression", "Anxiety", "Eating disorders", "Suicidal thoughts"],
            health: ["Teen pregnancy", "Sexually transmitted infections", "Obesity"],
            digital: ["Sexting", "Cyberbullying", "Social media addiction", "Identity theft"],
            social: ["Gangs", "Peer pressure", "Violence", "Discrimination"],
            academic: ["School dropout", "Low performance", "Lack of motivation"]
          },
          feedback: {
            success: "Excellent! You've correctly organized the risks.",
            incomplete: "Some concepts are missing from the map.",
            wrong: "Some concepts are in the wrong category."
          }
        },
        ageButtons: {
          children: "Children üëßüßí",
          teens: "Teens üë®‚Äçüéìüë©‚Äçüéì"
        }
      },
      fr: {
        title: "Carte Conceptuelle Interactive ",
        children: {
          instructions: "‚ú® Faites glisser les concepts sur la carte et organisez-les comme vous le souhaitez. Vous pouvez tout d√©placer librement. ‚ú®",
          conceptsTitle: "üîç Concepts de Risque",
          resetBtn: "üîÑ R√©initialiser",
          checkBtn: "‚úÖ V√©rifier",
          printBtn: "üñ®Ô∏è Imprimer",
          mainNode: "Risques pour Enfants üëßüßí",
          categories: {
            physical: "Physiques üí™",
            emotional: "√âmotionnels üòä",
            digital: "Num√©riques üì±",
            social: "Sociaux üë´",
            academic: "Acad√©miques üìö"
          },
          concepts: {
            physical: ["Chutes et coups ü§ï", "Br√ªlures üî•", "Accidents üöë", "Coupures ‚úÇÔ∏è", "Mauvaise alimentation üçî"],
            emotional: ["Tristesse üò¢", "Solitude üè†", "Peur üò®", "Faible estime de soi üòû"],
            digital: ["Contenu inappropri√© üëÅÔ∏è", "Contact avec inconnus üë§", "Trop de temps d'√©cran ‚è≥"],
            social: ["Harc√®lement üò†", "Pression des pairs üë•", "Exclusion üö´"],
            academic: ["Ne pas faire les devoirs üìù", "√ätre distrait en classe ü§™", "Manquer l'√©cole üèÉ"]
          },
          feedback: {
            success: "Excellent! üéâ Vous avez correctement organis√© les risques.",
            incomplete: "Il manque quelques concepts sur la carte. üîç",
            wrong: "Certains concepts sont dans la mauvaise cat√©gorie. ‚ùå"
          }
        },
        teens: {
          instructions: "Faites glisser les concepts sur la carte et organisez-les comme vous le souhaitez. Vous pouvez tout d√©placer librement.",
          conceptsTitle: "Concepts de Risque",
          resetBtn: "R√©initialiser",
          checkBtn: "V√©rifier",
          printBtn: "Imprimer",
          mainNode: "Risques pour Adolescents",
          categories: {
            physical: "Physiques",
            emotional: "√âmotionnels",
            health: "Sant√©",
            digital: "Num√©riques",
            social: "Sociaux",
            academic: "Acad√©miques"
          },
          concepts: {
            physical: ["Consommation d'alcool", "Usage de drogues", "Accidents de la route", "Relations non prot√©g√©es", "Mauvaise alimentation"],
            emotional: ["D√©pression", "Anxi√©t√©", "Troubles alimentaires", "Id√©es suicidaires"],
            health: ["Grossesse pr√©coce", "Infections sexuellement transmissibles", "Ob√©sit√©"],
            digital: ["Sexting", "Cyberharc√®lement", "Addiction aux r√©seaux", "Vol d'identit√©"],
            social: ["Gangs", "Pression des pairs", "Violence", "Discrimination"],
            academic: ["Abandon scolaire", "Faible performance", "Manque de motivation"]
          },
          feedback: {
            success: "Excellent! Vous avez correctement organis√© los riesgos.",
            incomplete: "Il manque quelques concepts sur la carte.",
            wrong: "Certains concepts sont dans la mauvaise cat√©gorie."
          }
        },
        ageButtons: {
          children: "Enfants üëßüßí",
          teens: "Adolescents üë®‚Äçüéìüë©‚Äçüéì"
        }
      }
    };
    
    let currentLanguage = 'es';
    let currentAgeGroup = 'children';
    let draggedConcept = null;
    let connections = { children: [], teens: [] };
    let currentScale = 1;
    
    // Cambiar idioma
    function changeLanguage(lang) {
      currentLanguage = lang;
      const texts = translations[lang];
      
      // Actualizar botones de idioma
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Actualizar textos generales
      document.getElementById('main-title').textContent = texts.title;
      document.getElementById('btn-children').textContent = texts.ageButtons.children;
      document.getElementById('btn-teens').textContent = texts.ageButtons.teens;
      
      // Actualizar secci√≥n de ni√±os
      updateSectionTexts('children', texts.children);
      
      // Actualizar secci√≥n de j√≥venes
      updateSectionTexts('teens', texts.teens);
      
      // Reorganizar conceptos aleatoriamente
      shuffleConcepts();
    }
    
    function updateSectionTexts(section, texts) {
      document.getElementById(`${section}-instructions`).textContent = texts.instructions;
      document.getElementById(`${section}-concepts-title`).textContent = texts.conceptsTitle;
      document.getElementById(`${section}-reset-btn`).textContent = texts.resetBtn;
      document.getElementById(`${section}-check-btn`).textContent = texts.checkBtn;
      document.querySelector(`#${section}-map .node.main`).textContent = texts.mainNode;
      
      // Actualizar categor√≠as
      for (const [category, title] of Object.entries(texts.categories)) {
        const element = document.getElementById(`${section}-${category}-node`);
        if (element) element.textContent = title;
      }
    }
    
    // Mostrar secci√≥n por grupo de edad
    function showAgeSection(ageGroup) {
      currentAgeGroup = ageGroup;
      
      // Actualizar botones
      document.querySelectorAll('.age-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Mostrar secci√≥n correspondiente
      document.querySelectorAll('.age-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`${ageGroup}-section`).classList.add('active');
      
      // Resetear zoom
      resetZoom();
    }
    
    // Mezclar conceptos aleatoriamente
    function shuffleConcepts() {
      const texts = translations[currentLanguage];
      
      // Mezclar conceptos para ni√±os
      const childrenConcepts = [];
      for (const category in texts.children.concepts) {
        childrenConcepts.push(...texts.children.concepts[category].map(text => ({
          text,
          type: category
        })));
      }
      shuffleArray(childrenConcepts);
      renderConcepts('children-pool', childrenConcepts);
      
      // Mezclar conceptos para j√≥venes
      const teensConcepts = [];
      for (const category in texts.teens.concepts) {
        teensConcepts.push(...texts.teens.concepts[category].map(text => ({
          text,
          type: category
        })));
      }
      shuffleArray(teensConcepts);
      renderConcepts('teens-pool', teensConcepts);
    }
    
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    
    function renderConcepts(poolId, concepts) {
      const pool = document.getElementById(poolId);
      // Limpiar pool excepto el t√≠tulo
      while (pool.childNodes.length > 1) {
        pool.removeChild(pool.lastChild);
      }
      
      // Agregar conceptos mezclados
      concepts.forEach(concept => {
        const div = document.createElement('div');
        div.className = 'concept';
        div.textContent = concept.text;
        div.setAttribute('draggable', 'true');
        div.setAttribute('data-type', concept.type);
        pool.appendChild(div);
      });
      
      // Configurar eventos de arrastre
      setupDragAndDrop(`#${poolId.replace('-pool', '-section')}`);
    }
    
    // Configurar eventos de arrastrar y soltar
    function setupDragAndDrop(sectionId) {
      const section = document.querySelector(sectionId);
      const concepts = section.querySelectorAll('.concept');
      const map = section.querySelector('.concept-map');
      
      // Configurar arrastre para conceptos del pool
      concepts.forEach(concept => {
        concept.addEventListener('dragstart', function(e) {
          draggedConcept = this;
          this.classList.add('dragging');
          e.dataTransfer.setData('text/plain', this.textContent);
          e.dataTransfer.setData('type', this.getAttribute('data-type'));
        });
        
        concept.addEventListener('dragend', function() {
          this.classList.remove('dragging');
        });
      });
      
      // Permitir soltar en el mapa
      map.addEventListener('dragover', function(e) {
        e.preventDefault();
      });
      
      map.addEventListener('drop', function(e) {
        e.preventDefault();
        if (!draggedConcept) return;
        
        // Crear nuevo nodo en el mapa
        const newNode = document.createElement('div');
        newNode.className = 'node';
        newNode.textContent = draggedConcept.textContent;
        newNode.setAttribute('draggable', 'true');
        newNode.setAttribute('data-type', draggedConcept.getAttribute('data-type'));
        newNode.style.position = 'absolute';
        
        // Posici√≥n relativa al mapa
        const rect = this.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        // Ajustar posici√≥n
        newNode.style.left = `${Math.max(10, Math.min(x - 50, rect.width - 100))}px`;
        newNode.style.top = `${Math.max(10, Math.min(y - 15, rect.height - 30))}px`;
        
        // Configurar eventos de arrastre para el nuevo nodo
        setupNodeDragEvents(newNode);
        
        this.appendChild(newNode);
        
        // Ocultar el concepto del pool (pero no eliminarlo)
        draggedConcept.style.visibility = 'hidden';
        draggedConcept = null;
        
        // Actualizar conexiones
        updateConnections(currentAgeGroup);
      });
      
      // Configurar arrastre para todos los nodos (incluyendo t√≠tulos principales y categor√≠as)
      const nodes = map.querySelectorAll('.node');
      nodes.forEach(node => {
        setupNodeDragEvents(node);
      });
    }
    
    function setupNodeDragEvents(node) {
      node.addEventListener('dragstart', function(e) {
        e.dataTransfer.setData('node', 'true');
        this.classList.add('dragging');
      });
      
      node.addEventListener('dragend', function() {
        this.classList.remove('dragging');
        updateConnections(currentAgeGroup);
      });
      
      node.addEventListener('drag', function(e) {
        // Actualizar posici√≥n mientras se arrastra
        const rect = this.getBoundingClientRect();
        const mapRect = this.parentElement.getBoundingClientRect();
        
        const x = e.clientX - mapRect.left - rect.width/2;
        const y = e.clientY - mapRect.top - rect.height/2;
        
        this.style.left = `${Math.max(0, Math.min(x, mapRect.width - rect.width))}px`;
        this.style.top = `${Math.max(0, Math.min(y, mapRect.height - rect.height))}px`;
      });
    }
    
    // Actualizar conexiones entre nodos
    function updateConnections(ageGroup) {
      const section = document.getElementById(`${ageGroup}-section`);
      const map = section.querySelector('.concept-map');
      
      // Eliminar conexiones anteriores
      const existingLines = map.querySelectorAll('.connection-line');
      existingLines.forEach(line => line.remove());
      
      // Obtener todos los nodos excepto el principal
      const nodes = map.querySelectorAll('.node:not(.main)');
      const mainNode = map.querySelector('.node.main');
      const mainRect = mainNode.getBoundingClientRect();
      const mainCenter = {
        x: mainRect.left + mainRect.width / 2,
        y: mainRect.top + mainRect.height / 2
      };
      
      // Crear conexiones desde el nodo principal a las categor√≠as
      const categoryNodes = map.querySelectorAll('.node:not(.main):not([draggable="true"])');
      categoryNodes.forEach(categoryNode => {
        const rect = categoryNode.getBoundingClientRect();
        const center = {
          x: rect.left + rect.width / 2,
          y: rect.top + rect.height / 2
        };
        
        drawLine(map, mainCenter, center);
      });
      
      // Crear conexiones desde las categor√≠as a los conceptos
      nodes.forEach(node => {
        if (node.hasAttribute('draggable')) {
          const type = node.getAttribute('data-type');
          const categoryNode = map.querySelector(`#${ageGroup}-${type}-node`);
          
          if (categoryNode) {
            const nodeRect = node.getBoundingClientRect();
            const nodeCenter = {
              x: nodeRect.left + nodeRect.width / 2,
              y: nodeRect.top + nodeRect.height / 2
            };
            
            const categoryRect = categoryNode.getBoundingClientRect();
            const categoryCenter = {
              x: categoryRect.left + categoryRect.width / 2,
              y: categoryRect.top + categoryRect.height / 2
            };
            
            drawLine(map, categoryCenter, nodeCenter);
          }
        }
      });
    }
    
    // Dibujar l√≠nea entre dos puntos
    function drawLine(map, start, end) {
      const mapRect = map.getBoundingClientRect();
      
      const startX = start.x - mapRect.left;
      const startY = start.y - mapRect.top;
      const endX = end.x - mapRect.left;
      const endY = end.y - mapRect.top;
      
      const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
      const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
      
      const line = document.createElement('div');
      line.className = 'connection-line';
      line.style.width = `${length}px`;
      line.style.height = '2px';
      line.style.left = `${startX}px`;
      line.style.top = `${startY}px`;
      line.style.transform = `rotate(${angle}deg)`;
      
      map.appendChild(line);
    }
    
    // Reiniciar el mapa actual
    function resetCurrentMap() {
      const section = document.querySelector(`#${currentAgeGroup}-section`);
      const map = section.querySelector('.concept-map');
      const concepts = section.querySelectorAll('.concept');
      
      // Eliminar todos los nodos excepto los principales
      map.querySelectorAll('.node[draggable="true"]').forEach(node => {
        node.remove();
      });
      
      // Eliminar todas las conexiones
      map.querySelectorAll('.connection-line').forEach(line => {
        line.remove();
      });
      
      // Mostrar todos los conceptos nuevamente
      concepts.forEach(concept => {
        concept.style.visibility = 'visible';
      });
      
      // Reorganizar conceptos aleatoriamente
      shuffleConcepts();
      
      // Resetear posici√≥n de nodos principales y categor√≠as
      const texts = translations[currentLanguage][currentAgeGroup];
      
      if (currentAgeGroup === 'children') {
        // Posici√≥n inicial para ni√±os
        document.querySelector('#children-map .node.main').style.cssText = 'top: 30px; left: 50%; transform: translateX(-50%);';
        document.getElementById('children-physical-node').style.cssText = 'top: 120px; left: 20%;';
        document.getElementById('children-emotional-node').style.cssText = 'top: 120px; left: 35%;';
        document.getElementById('children-digital-node').style.cssText = 'top: 120px; left: 50%;';
        document.getElementById('children-social-node').style.cssText = 'top: 120px; left: 65%;';
        document.getElementById('children-academic-node').style.cssText = 'top: 120px; left: 80%;';
      } else {
        // Posici√≥n inicial para j√≥venes
        document.querySelector('#teens-map .node.main').style.cssText = 'top: 30px; left: 50%; transform: translateX(-50%);';
        document.getElementById('teens-physical-node').style.cssText = 'top: 120px; left: 20%;';
        document.getElementById('teens-emotional-node').style.cssText = 'top: 120px; left: 35%;';
        document.getElementById('teens-health-node').style.cssText = 'top: 120px; left: 50%;';
        document.getElementById('teens-digital-node').style.cssText = 'top: 120px; left: 65%;';
        document.getElementById('teens-social-node').style.cssText = 'top: 120px; left: 80%;';
        document.getElementById('teens-academic-node').style.cssText = 'top: 220px; left: 50%; transform: translateX(-50%);';
      }
      
      // Actualizar conexiones
      updateConnections(currentAgeGroup);
      
      // Resetear zoom
      resetZoom();
    }
    
    // Verificar el mapa actual
    function checkCurrentMap() {
      const texts = translations[currentLanguage][currentAgeGroup];
      const section = document.querySelector(`#${currentAgeGroup}-section`);
      const map = section.querySelector('.concept-map');
      
      // Contar nodos por categor√≠a
      const counts = {};
      for (const category in texts.concepts) {
        counts[category] = map.querySelectorAll(`.node[data-type="${category}"]`).length;
      }
      
      let complete = true;
      
      // Verificar que cada categor√≠a tenga el n√∫mero correcto de conceptos
      for (const [category, conceptList] of Object.entries(texts.concepts)) {
        if (counts[category] !== conceptList.length) {
          complete = false;
          break;
        }
      }
      
      if (!complete) {
        alert(texts.feedback.incomplete);
      } else {
        alert(texts.feedback.success);
      }
    }
    
    // Imprimir el mapa
    function printMap() {
      // Preparar mapa para impresi√≥n
      const section = document.querySelector(`#${currentAgeGroup}-section`);
      const map = section.querySelector('.concept-map');
      
      // Crear grupos por categor√≠a para la impresi√≥n
      const categories = {};
      const mainNode = map.querySelector('.node.main');
      const mainText = mainNode.textContent;
      
      // Limpiar el mapa para impresi√≥n
      map.innerHTML = '';
      
      // Agregar nodo principal
      const mainDiv = document.createElement('div');
      mainDiv.className = 'node main';
      mainDiv.textContent = mainText;
      map.appendChild(mainDiv);
      
      // Organizar nodos por categor√≠a
      const nodes = section.querySelectorAll('.node[draggable="true"]');
      nodes.forEach(node => {
        const type = node.getAttribute('data-type');
        if (!categories[type]) {
          categories[type] = [];
        }
        categories[type].push(node.textContent);
      });
      
      // Agregar categor√≠as al mapa de impresi√≥n
      for (const [category, concepts] of Object.entries(categories)) {
        const categoryGroup = document.createElement('div');
        categoryGroup.className = 'category-group';
        
        const categoryTitle = document.createElement('div');
        categoryTitle.className = 'category-title';
        categoryTitle.textContent = translations[currentLanguage][currentAgeGroup].categories[category];
        categoryGroup.appendChild(categoryTitle);
        
        concepts.forEach(concept => {
          const conceptDiv = document.createElement('div');
          conceptDiv.className = 'node';
          conceptDiv.textContent = concept;
          categoryGroup.appendChild(conceptDiv);
        });
        
        map.appendChild(categoryGroup);
      }
      
      // Imprimir
      window.print();
      
      // Restaurar el mapa interactivo despu√©s de imprimir
      setTimeout(() => {
        location.reload();
      }, 1000);
    }
    
    // Funciones de zoom
    function zoomIn() {
      currentScale = Math.min(2, currentScale + 0.1);
      updateMapZoom();
    }
    
    function zoomOut() {
      currentScale = Math.max(0.5, currentScale - 0.1);
      updateMapZoom();
    }
    
    function resetZoom() {
      currentScale = 1;
      updateMapZoom();
    }
    
    function updateMapZoom() {
      const section = document.querySelector(`#${currentAgeGroup}-section`);
      const mapContainer = section.querySelector('.concept-map-container');
      mapContainer.style.transform = `scale(${currentScale})`;
    }
    
    // Inicializar
    document.addEventListener('DOMContentLoaded', function() {
      shuffleConcepts();
      setupDragAndDrop('#children-section');
      setupDragAndDrop('#teens-section');
    });
    
  </script>
</body>
</html>